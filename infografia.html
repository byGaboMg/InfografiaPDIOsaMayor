<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Almacenamiento de Imágenes: Raster vs Vectorial — Equipo Osa Mayor</title>
  <style>
    :root{
      --bg-start:#0b1220; /* slate-900 aprox */
      --bg-end:#070b15;   /* slate-950 aprox */
      --text:#e6edf6;     /* slate-100 */
      --muted:#9aa4b2;    /* slate-400 */
      --muted-2:#c6cbd3;  /* slate-300 */
      --card:#0f172a66;   /* white/5 on dark */
      --border:#ffffff22; /* white/10 */
      --accent-blue:#93c5fd; /* blue-300 */
      --accent-amber:#fcd34d; /* amber-300 */
      --shadow:0 8px 28px rgba(0,0,0,.45);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      background: linear-gradient(180deg,var(--bg-start),var(--bg-end));
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{text-align:center;padding:32px 16px 12px}
    h1{font-size:clamp(1.5rem,2.5vw,2.4rem);margin:0 0 6px 0}
    p.lead{color:var(--muted-2);margin:0}

    /* Controls */
    .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin:16px 0}
    .field{display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:10px 12px}
    .field input[type="text"]{background:transparent;border:none;outline:none;color:var(--text);width:min(72ch,60vw)}
    .btn{border:1px solid var(--border);background:var(--card);padding:10px 12px;border-radius:14px;color:var(--text);cursor:pointer}
    .btn:hover{border-color:#60a5fa}

    /* Grid panels */
    .grid{display:grid;gap:20px;grid-template-columns:1fr}
    @media (min-width: 840px){
      .grid{grid-template-columns:1fr 1fr}
    }

    .panel{border:1px solid var(--border);background:var(--card);border-radius:18px;padding:16px;box-shadow:var(--shadow)}
    .panel h2{margin:0 0 6px;font-size:1.2rem}
    .panel .meta{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .chip{font-size:.8rem;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:var(--card);cursor:pointer}
    .chip:hover{border-color:#60a5fa}
    .bullets{margin:8px 0 0 0;padding:0 0 0 18px}
    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-top:10px}
    .small{font-size:.82rem;color:var(--muted)}

    /* Raster image area */
    .img-wrap{position:relative;overflow:hidden;border:1px solid var(--border);border-radius:14px;aspect-ratio:16/9}
    .img-wrap img{width:100%;height:100%;object-fit:cover}
    .lens{position:absolute;width:140px;height:140px;border-radius:50%;border:4px solid #fff;box-shadow: var(--shadow), inset 0 0 0 3px rgba(0,0,0,.35);background-repeat:no-repeat;pointer-events:none;display:none}
    .lens.show{display:block}

    .px-box{margin-top:12px;border:1px solid var(--border);border-radius:14px;padding:10px}
    .px-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
    .px-view{overflow:auto}
    .px-view img{width:320px;image-rendering:pixelated;transform-origin:top left}

    /* Vector */
    .vector-stage{display:flex;align-items:center;justify-content:center;border:1px solid var(--border);border-radius:14px;padding:12px;margin-top:12px}

    /* Conclusion */
    .conclusion{margin-top:20px;text-align:center;border:1px solid var(--border);border-radius:16px;padding:16px;background:var(--card);font-weight:600}

    /* Comparative table */
    .table-wrap{overflow-x:auto;margin-top:20px;border:1px solid var(--border);border-radius:16px;background:var(--card);padding:12px}
    table{width:100%;border-collapse:collapse}
    th,td{text-align:left;padding:10px;border-bottom:1px solid #ffffff14}
    thead th{color:var(--muted-2);font-weight:600}
    tbody td{color:#d8dee9}

    /* Media embed / image section */
    .media-grid{display:grid;gap:16px;margin-top:20px;grid-template-columns:1fr}
    @media (min-width:860px){.media-grid{grid-template-columns:1fr 1fr}}
    figure{margin:0;border:1px solid var(--border);border-radius:16px;overflow:hidden;background:var(--card)}
    figure img{display:block;width:100%;height:auto}
    figure figcaption{padding:10px;color:var(--muted)}
    .video{position:relative;width:100%;aspect-ratio:16/9;border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .video iframe{position:absolute;inset:0;width:100%;height:100%;border:0}

    footer{margin:22px 0 8px;text-align:center;color:var(--muted);font-size:.9rem}
    .brand{opacity:.9}

    /* Responsive helpers for small screens */
    @media (max-width:480px){
      .field input[type="text"]{width:100%}
      .lens{width:120px;height:120px}
    }

    /* COMPARISON SLIDER STYLES - CORREGIDO */
    .comparison-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      border: 3px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }
    
    .comparison-image-container {
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* Relación de aspecto 16:9 */
      overflow: hidden;
    }
    
    .comparison-bitmap, .comparison-vector {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      pointer-events: none;
    }
    
    .comparison-bitmap {
      filter: blur(3px) grayscale(30%);
      width: 100%;
    }
    
    .comparison-vector {
      width: 50%;
      filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
    }
    
    .comparison-slider {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 100%;
      background: #ffcc00;
      box-shadow: 0 0 15px rgba(255, 204, 0, 0.7);
      cursor: ew-resize;
      z-index: 10;
    }
    
    .comparison-slider-handle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      background: #ffcc00;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
      cursor: grab;
      transition: all 0.2s ease;
    }
    
    .comparison-slider-handle:active {
      cursor: grabbing;
      transform: translate(-50%, -50%) scale(1.1);
    }
    
    .comparison-slider-handle i {
      color: #1a2a6c;
      font-size: 1.5rem;
    }
    
    .comparison-labels {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 800px;
      margin: 1rem auto;
    }
    
    .comparison-label {
      background: rgba(0, 0, 0, 0.7);
      padding: 0.8rem 1.5rem;
      border-radius: 30px;
      font-weight: bold;
      font-size: 1rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .comparison-label-bitmap {
      color: #ff6b6b;
    }
    
    .comparison-label-vector {
      color: #4ecdc4;
    }
    
    @media (max-width: 768px) {
      .comparison-label {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
      }
      
      .comparison-slider-handle {
        width: 40px;
        height: 40px;
      }
      
      .comparison-slider-handle i {
        font-size: 1.2rem;
      }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header class="container">
    <h1>Almacenamiento de Imágenes Digitales: Raster vs Vectorial</h1>
    <p class="lead">Tema 1.4 – Procesamiento de Imágenes Digitales • Equipo <strong>Osa Mayor</strong></p>
  </header>

  <main class="container">
    <!-- Controles globales -->
    <section class="controls" aria-label="Controles globales">
      <label class="field">
        <span>URL Raster:</span>
        <input id="rasterUrl" type="text" placeholder="Pega la URL de una imagen" value="https://inkscape.app/wp-content/uploads/imagen-vectorial.webp" />
      </label>
      <button class="btn" id="resetBtn" type="button">Restablecer</button>
    </section>

    <!-- Dos paneles: Raster y Vectorial -->
    <section class="grid" aria-label="Paneles comparativos">
      <!-- Panel Raster -->
      <article class="panel" id="panel-raster" aria-labelledby="title-raster" style="border-color:#1e3a8acc;background:linear-gradient(180deg,#0b122055,#0b122044)">
        <div class="meta">
          <h2 id="title-raster" style="color:var(--accent-blue)">Raster (Mapa de bits)</h2>
          <button class="chip" type="button" data-info="raster">Más info</button>
        </div>
        <ul class="bullets">
          <li>Basado en píxeles</li>
          <li>Ideal para fotos y texturas</li>
          <li>Escalado: puede pixelarse</li>
          <li>PDI: filtros, convolución, CNN</li>
        </ul>

        <div class="row">
          <label class="field">
            <span>Brillo</span>
            <input id="range-bright" type="range" min="0.6" max="1.6" step="0.02" value="1" />
          </label>
          <label class="field">
            <span>Escala (pixelado)</span>
            <input id="range-scale" type="range" min="1" max="6" step="0.1" value="1" />
          </label>
          <span class="small">Pasa el cursor sobre la imagen para usar la lupa</span>
        </div>

        <div class="img-wrap" id="img-wrap">
          <img id="img-raster" alt="Raster" />
          <div class="lens" id="lens" aria-hidden="true"></div>
        </div>

        <div class="px-box">
          <div class="px-bar">
            <span class="small">Raster pixelado (al ampliar)</span>
            <span class="small">factor ×<span id="scaleLabel">1.0</span></span>
          </div>
          <div class="px-view">
            <img id="img-pixel" alt="Raster pixelado" />
          </div>
        </div>
      </article>

      <!-- Panel Vectorial -->
      <article class="panel" id="panel-vector" aria-labelledby="title-vector" style="border-color:#78350fcc;background:linear-gradient(180deg,#27160055,#27160044)">
        <div class="meta">
          <h2 id="title-vector" style="color:var(--accent-amber)">Vectorial</h2>
          <button class="chip" type="button" data-info="vector">Más info</button>
        </div>
        <ul class="bullets">
          <li>Basado en geometría (puntos, líneas, polígonos)</li>
          <li>Ideal para logos, UI, CAD</li>
          <li>Escala sin pérdida</li>
          <li>Procesamiento geométrico</li>
        </ul>

        <div class="row field" style="width:max-content">
          <span>Tamaño (SVG)</span>
          <input id="range-svg" type="range" min="100" max="420" step="1" value="180" />
          <span class="small">Escala sin pérdida</span>
        </div>
        <div class="vector-stage" id="vector-stage" aria-label="Escenario vectorial">
          <!-- SVG se inserta por JS -->
        </div>
      </article>
    </section>

    <!-- Conclusión -->
    <section class="conclusion" aria-label="Conclusión">
      📷 Cámara/Escáner → <span style="color:var(--accent-blue)">Raster</span>
      <span style="opacity:.6;margin:0 12px">|</span>
      ✏️ Ilustraciones/Esquemas → <span style="color:var(--accent-amber)">Vectorial</span>
    </section>

    <!-- Cuadro comparativo principal -->
    <section class="table-wrap" aria-label="Cuadro comparativo Raster vs Vectorial">
      <h3 style="margin:6px 8px 12px">Cuadro comparativo</h3>
      <table>
        <thead>
          <tr>
            <th>Característica</th>
            <th>Raster</th>
            <th>Vectorial</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Unidad básica</td>
            <td>Píxel</td>
            <td>Primitivas geométricas</td>
          </tr>
          <tr>
            <td>Escalado</td>
            <td>Se pixela al ampliar</td>
            <td>Escala sin pérdida</td>
          </tr>
          <tr>
            <td>Usos típicos</td>
            <td>Fotografía, texturas</td>
            <td>Logotipos, UI, CAD</td>
          </tr>
          <tr>
            <td>Tamaño de archivo</td>
            <td>Puede ser grande en alta resolución</td>
            <td>Generalmente ligero</td>
          </tr>
          <tr>
            <td>Edición</td>
            <td>Por píxel, filtros, CNN</td>
            <td>Transformaciones geométricas</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Efecto de comparación Bitmap vs Vector -->
    <section class="table-wrap" aria-label="Comparación interactiva">
      <h3 style="margin:6px 8px 12px">Comparación Interactiva: Bitmap vs Vectorial</h3>
      <p>Desliza el controlador amarillo para comparar las diferencias entre una imagen bitmap (pixelada) y una imagen vectorial (nítida).</p>
      
      <div class="comparison-container" id="comparison-container">
        <div class="comparison-image-container">
          <img class="comparison-bitmap" id="comparison-bitmap" src="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?q=80&w=1600&auto=format&fit=crop" alt="Imagen Bitmap">
          <img class="comparison-vector" id="comparison-vector" src="https://images.unsplash.com/photo-1470770841072-f978cf4d019e?q=80&w=1600&auto=format&fit=crop" alt="Imagen Vectorial">
        </div>
        <div class="comparison-slider" id="comparison-slider">
          <div class="comparison-slider-handle">
            <i class="fas fa-arrows-alt-h"></i>
          </div>
        </div>
      </div>
      
      <div class="comparison-labels">
        <div class="comparison-label comparison-label-bitmap">BITMAP (BAJA RESOLUCIÓN)</div>
        <div class="comparison-label comparison-label-vector">VECTOR (ALTA DEFINICIÓN)</div>
      </div>
    </section>

    <!-- Video embebido -->
    <section class="media-grid" aria-label="Video explicativo">
        <h1><br/><br/>Para saber más 🤓☝️:</h1>
      <div class="video" aria-label="Video explicativo">
        <iframe src="https://www.youtube.com/embed/p2thSkOa_Xg" title="Video: Raster vs Vector" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      </div>
    </section>

    <!-- Tabla de ejemplos de tamaños por formato (opcional) -->
    <section class="table-wrap" aria-label="Ejemplo de tamaños por formato">
      <h3 style="margin:6px 8px 12px">Ejemplo de tamaños por formato (260×175 px, 24-bit)</h3>
      <table>
        <thead>
          <tr>
            <th>Formato</th>
            <th>Tamaño</th>
            <th>Relación</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>JPEG</td><td>46.3 KB</td><td>≈ 2.95× más pequeño</td></tr>
          <tr><td>PNG</td><td>96.3 KB</td><td>≈ 1.42×</td></tr>
          <tr><td>TIFF</td><td>138.5 KB</td><td>≈ 0.98×</td></tr>
          <tr><td>GIF</td><td>38.2 KB</td><td>≈ 3.6× más pequeño</td></tr>
        </tbody>
      </table>
    </section>

    <footer>
      <div class="brand">4BM1 | Equipo: <strong>Osa Mayor</strong> | Gracias por su atención u.u</div>
    </footer>
  </main>

  <!-- Overlays de info -->
  <dialog id="dlg-info" style="border:none;border-radius:16px;padding:0;max-width:640px;width:92vw;background:#0b1220;color:var(--text)">
    <div style="padding:16px 16px 8px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between">
      <h4 style="margin:0;font-size:1.05rem">Más información</h4>
      <button class="btn" id="dlg-close" value="cancel">Cerrar</button>
    </div>
    <div id="dlg-content" style="padding:12px 16px 18px;color:#d8dee9"></div>
  </dialog>

  <script>
    // ====== Estado inicial ======
    const rasterUrlInput = document.getElementById('rasterUrl');
    const imgRaster = document.getElementById('img-raster');
    const imgPixel = document.getElementById('img-pixel');
    const imgWrap = document.getElementById('img-wrap');
    const lens = document.getElementById('lens');
    const rangeBright = document.getElementById('range-bright');
    const rangeScale = document.getElementById('range-scale');
    const scaleLabel = document.getElementById('scaleLabel');
    const resetBtn = document.getElementById('resetBtn');

    const rangeSvg = document.getElementById('range-svg');
    const vectorStage = document.getElementById('vector-stage');

    const dlg = document.getElementById('dlg-info');
    const dlgContent = document.getElementById('dlg-content');
    const dlgClose = document.getElementById('dlg-close');

    let brightness = 1;
    let pxScale = 1;
    let svgSize = 180;
    const zoom = 2.2;

    function applySources(){
      const src = rasterUrlInput.value.trim();
      imgRaster.src = src;
      imgPixel.src = src;
      lens.style.backgroundImage = `url('${src}')`;
      
      // Actualizar también las imágenes del comparador
      document.getElementById('comparison-bitmap').src = src;
      document.getElementById('comparison-vector').src = src;
      
      applyFilters();
      applyPixelScale();
    }

    function applyFilters(){
      imgRaster.style.filter = `brightness(${brightness})`;
      imgPixel.style.filter = `brightness(${brightness})`;
    }

    function applyPixelScale(){
      imgPixel.style.transform = `scale(${pxScale})`;
      scaleLabel.textContent = pxScale.toFixed(1);
    }

    function renderVector(){
      vectorStage.innerHTML = `
        <svg width="${svgSize}" height="${svgSize}" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Logotipo vectorial">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#60a5fa" />
              <stop offset="100%" stop-color="#2563eb" />
            </linearGradient>
          </defs>
          <circle cx="50" cy="50" r="44" fill="url(#g)" />
          <path d="M25 55 L45 30 L60 45 L75 25" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" />
          <circle cx="75" cy="25" r="5" fill="#fff" />
        </svg>`;
    }

    // ====== Lupa ======
    function onMove(e){
      const rect = imgWrap.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const lw = lens.offsetWidth / 2;
      const lh = lens.offsetHeight / 2;

      const cx = Math.max(lw, Math.min(rect.width - lw, x));
      const cy = Math.max(lh, Math.min(rect.height - lh, y));

      lens.style.left = (cx - lw) + 'px';
      lens.style.top = (cy - lh) + 'px';

      const bgW = rect.width * zoom;
      const bgH = rect.height * zoom;
      lens.style.backgroundSize = bgW + 'px ' + bgH + 'px';
      const posX = (cx / rect.width) * bgW - lw;
      const posY = (cy / rect.height) * bgH - lh;
      lens.style.backgroundPosition = '-' + posX + 'px -' + posY + 'px';
    }

    imgWrap.addEventListener('mouseenter',()=>lens.classList.add('show'));
    imgWrap.addEventListener('mouseleave',()=>lens.classList.remove('show'));
    imgWrap.addEventListener('mousemove', onMove);

    // ====== Controles ======
    rasterUrlInput.addEventListener('change', applySources);
    rangeBright.addEventListener('input', (e)=>{brightness = parseFloat(e.target.value); applyFilters();});
    rangeScale.addEventListener('input', (e)=>{pxScale = parseFloat(e.target.value); applyPixelScale();});
    rangeSvg.addEventListener('input', (e)=>{svgSize = parseInt(e.target.value,10); renderVector();});

    resetBtn.addEventListener('click', ()=>{
      brightness = 1; rangeBright.value = '1';
      pxScale = 1; rangeScale.value = '1';
      svgSize = 180; rangeSvg.value = '180';
      rasterUrlInput.value = 'https://images.unsplash.com/photo-1470770841072-f978cf4d019e?q=80&w=1600&auto=format&fit=crop';
      applySources(); renderVector();
    });

    // ====== Overlays de info ======
    document.querySelectorAll('.chip[data-info]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const type = btn.getAttribute('data-info');
        if(type === 'raster'){
          dlgContent.innerHTML = `<ul style="margin:0 0 0 18px;line-height:1.6">
            <li>Restauración y mejora por píxel</li>
            <li>Segmentación (thresholding, region growing)</li>
            <li>CNN / Deep Learning</li>
            <li>Filtrado espacial y frecuencial</li>
          </ul>`;
        } else {
          dlgContent.innerHTML = `<ul style="margin:0 0 0 18px;line-height:1.6">
            <li>Iconografía/UI y logotipos</li>
            <li>CAD y trazado preciso</li>
            <li>Exportes limpios para impresión</li>
            <li>Archivos ligeros y escalables</li>
          </ul>`;
        }
        if(typeof dlg.showModal === 'function') dlg.showModal(); else dlg.setAttribute('open','');
      });
    });
    dlgClose.addEventListener('click', ()=>{ if(dlg.open) dlg.close(); dlg.removeAttribute('open'); });

    // ====== COMPARISON SLIDER FUNCTIONALITY ======
    const comparisonSlider = document.getElementById('comparison-slider');
    const comparisonSliderHandle = document.querySelector('.comparison-slider-handle');
    const comparisonVector = document.getElementById('comparison-vector');
    let isDragging = false;
    
    // Eventos para mouse
    comparisonSlider.addEventListener('mousedown', startDrag);
    document.addEventListener('mouseup', stopDrag);
    document.addEventListener('mousemove', drag);
    
    // Eventos para touch
    comparisonSlider.addEventListener('touchstart', startDrag);
    document.addEventListener('touchend', stopDrag);
    document.addEventListener('touchmove', drag);
    
    function startDrag(e) {
      e.preventDefault();
      isDragging = true;
      comparisonSliderHandle.style.cursor = 'grabbing';
    }
    
    function stopDrag() {
      isDragging = false;
      comparisonSliderHandle.style.cursor = 'grab';
    }
    
    function drag(e) {
      if (!isDragging) return;
      
      let clientX;
      if (e.type === 'touchmove') {
        clientX = e.touches[0].clientX;
      } else {
        clientX = e.clientX;
      }
      
      const containerRect = document.getElementById('comparison-container').getBoundingClientRect();
      let position = (clientX - containerRect.left) / containerRect.width;
      position = Math.max(0, Math.min(1, position)); // Limitar entre 0 y 1
      
      // Actualizar posición del slider y ancho de la imagen vectorial
      comparisonSlider.style.left = `${position * 100}%`;
      comparisonVector.style.width = `${position * 100}%`;
    }
    
    // Posicionamiento inicial
    comparisonSlider.style.left = '50%';
    comparisonVector.style.width = '50%';

    // ====== Init ======
    applySources();
    renderVector();
  </script>
</body>
</html>